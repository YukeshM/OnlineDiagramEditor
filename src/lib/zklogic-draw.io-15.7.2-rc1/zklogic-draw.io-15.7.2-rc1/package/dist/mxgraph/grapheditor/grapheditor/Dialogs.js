var OpenDialog=function(){var e=document.createElement("iframe");e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0",e.setAttribute("width",0+(Editor.useLocalStorage?640:320)+"px"),e.setAttribute("height",0+(Editor.useLocalStorage?480:220)+"px"),e.setAttribute("src",OPEN_FORM),this.container=e},ColorDialog=function(e,t,l,i){this.editorUi=e;var n=document.createElement("input");n.style.marginBottom="10px",mxClient.IS_IE&&(n.style.marginTop="10px",e.container.appendChild(n)||document.body.appendChild(n));var o=null!=l?l:this.createApplyFunction();function a(){var t=n.value;/(^#?[a-zA-Z0-9]*$)/.test(t)?("none"!=t&&"#"!=t.charAt(0)&&(t="#"+t),ColorDialog.addRecentColor("none"!=t?t.substring(1):t,12),o(t),e.hideDialog()):e.handleError({message:mxResources.get("invalidInput")})}this.init=function(){mxClient.IS_TOUCH||n.focus()};var r=new mxJSColor.color(n);r.pickerOnfocus=!1,r.showPicker();var d=document.createElement("div");mxJSColor.picker.box.style.position="relative",mxJSColor.picker.box.style.width="230px",mxJSColor.picker.box.style.height="100px",mxJSColor.picker.box.style.paddingBottom="10px",d.appendChild(mxJSColor.picker.box);var s=document.createElement("center");function c(){var e=m(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}var m=mxUtils.bind(this,(function(e,t,l,i){t=null!=t?t:12;var o=document.createElement("table");o.style.borderCollapse="collapse",o.setAttribute("cellspacing","0"),o.style.marginBottom="20px",o.style.cellSpacing="0px",o.style.marginLeft="1px";var d=document.createElement("tbody");o.appendChild(d);for(var m=e.length/t,p=0;p<m;p++){for(var u=document.createElement("tr"),h=0;h<t;h++)mxUtils.bind(this,(function(e){var t=document.createElement("td");if(t.style.border="0px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",null==e&&(e=l),null!=e){t.style.borderWidth="1px","none"==e?t.style.background="url('"+Dialog.prototype.noColorImage+"')":t.style.backgroundColor="#"+e;var i=this.colorNames[e.toUpperCase()];null!=i&&t.setAttribute("title",i)}u.appendChild(t),null!=e&&(t.style.cursor="pointer",mxEvent.addListener(t,"click",(function(){"none"==e?(r.fromString("ffffff"),n.value="none"):r.fromString(e)})),mxEvent.addListener(t,"dblclick",a))}))(e[p*t+h]);d.appendChild(u)}if(i){var g=document.createElement("td");g.setAttribute("title",mxResources.get("reset")),g.style.border="1px solid black",g.style.padding="0px",g.style.width="16px",g.style.height="16px",g.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",g.style.backgroundPosition="center center",g.style.backgroundRepeat="no-repeat",g.style.cursor="pointer",u.appendChild(g),mxEvent.addListener(g,"click",(function(){ColorDialog.resetRecentColors(),o.parentNode.replaceChild(c(),o)}))}return s.appendChild(o),o}));if(d.appendChild(n),mxClient.IS_IE||mxClient.IS_IE11)n.style.width="216px";else{n.style.width="182px";var p=document.createElement("input");p.setAttribute("type","color"),p.style.visibility="hidden",p.style.width="0px",p.style.height="0px",p.style.border="none",p.style.marginLeft="2px",d.style.whiteSpace="nowrap",d.appendChild(p),d.appendChild(mxUtils.button("...",(function(){document.activeElement==p?n.focus():(p.value="#"+n.value,p.click())}))),mxEvent.addListener(p,"input",(function(){r.fromString(p.value.substring(1))}))}mxUtils.br(d),c();var u=m(this.presetColors);u.style.marginBottom="8px",(u=m(this.defaultColors)).style.marginBottom="16px",d.appendChild(s);var h=document.createElement("div");h.style.textAlign="right",h.style.whiteSpace="nowrap";var g=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog(),null!=i&&i()}));g.className="geBtn",e.editor.cancelFirst&&h.appendChild(g);var x=mxUtils.button(mxResources.get("apply"),a);x.className="geBtn gePrimaryBtn",h.appendChild(x),e.editor.cancelFirst||h.appendChild(g),null!=t&&("none"==t?(r.fromString("ffffff"),n.value="none"):r.fromString(t)),d.appendChild(h),this.picker=r,this.colorInput=n,mxEvent.addListener(d,"keydown",(function(t){27==t.keyCode&&(e.hideDialog(),null!=i&&i(),mxEvent.consume(t))})),this.container=d};ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],ColorDialog.prototype.colorNames={},ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,(function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}}))},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,e),ColorDialog.recentColors.length>=t&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};var AboutDialog=function(e){var t=document.createElement("div");t.setAttribute("align","center");var l=document.createElement("h3");mxUtils.write(l,mxResources.get("about")+" GraphEditor"),t.appendChild(l);var i=document.createElement("img");i.style.border="0px",i.setAttribute("width","176"),i.setAttribute("width","151"),i.setAttribute("src",IMAGE_PATH+"/logo.png"),t.appendChild(i),mxUtils.br(t),mxUtils.write(t,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(t);var n=document.createElement("a");n.setAttribute("href","http://www.jgraph.com/"),n.setAttribute("target","_blank"),mxUtils.write(n,"www.jgraph.com"),t.appendChild(n),mxUtils.br(t),mxUtils.br(t);var o=mxUtils.button(mxResources.get("close"),(function(){e.hideDialog()}));o.className="geBtn gePrimaryBtn",t.appendChild(o),this.container=t},TextareaDialog=function(e,t,l,i,n,o,a,r,d,s,c,m,p,u){var h,g;a=null!=a?a:300,r=null!=r?r:120,s=null!=s&&s;var x=document.createElement("table"),v=document.createElement("tbody");h=document.createElement("tr"),(g=document.createElement("td")).style.fontSize="10pt",g.style.width="100px",mxUtils.write(g,t),h.appendChild(g),v.appendChild(h),h=document.createElement("tr"),g=document.createElement("td");var b=document.createElement("textarea");if(c&&b.setAttribute("wrap","off"),b.setAttribute("spellcheck","false"),b.setAttribute("autocorrect","off"),b.setAttribute("autocomplete","off"),b.setAttribute("autocapitalize","off"),mxUtils.write(b,l||""),b.style.resize="none",b.style.width=a+"px",b.style.height=r+"px",this.textarea=b,this.init=function(){b.focus(),b.scrollTop=0},g.appendChild(b),h.appendChild(g),v.appendChild(h),h=document.createElement("tr"),(g=document.createElement("td")).style.paddingTop="14px",g.style.whiteSpace="nowrap",g.setAttribute("align","right"),null!=p){var C=mxUtils.button(mxResources.get("help"),(function(){e.editor.graph.openLink(p)}));C.className="geBtn",g.appendChild(C)}if(null!=u)for(var y=0;y<u.length;y++)!function(e,t,l){var i=mxUtils.button(e,(function(e){t(e,b)}));null!=l&&i.setAttribute("title",l),i.className="geBtn",g.appendChild(i)}(u[y][0],u[y][1],u[y][2]);var f=mxUtils.button(o||mxResources.get("cancel"),(function(){e.hideDialog(),null!=n&&n()}));if(f.setAttribute("title","Escape"),f.className="geBtn",e.editor.cancelFirst&&g.appendChild(f),null!=d&&d(g,b),null!=i){var E=mxUtils.button(m||mxResources.get("apply"),(function(){s||e.hideDialog(),i(b.value)}));E.setAttribute("title","Ctrl+Enter"),E.className="geBtn gePrimaryBtn",g.appendChild(E),mxEvent.addListener(b,"keypress",(function(e){13==e.keyCode&&mxEvent.isControlDown(e)&&E.click()}))}e.editor.cancelFirst||g.appendChild(f),h.appendChild(g),v.appendChild(h),x.appendChild(v),this.container=x},EditDiagramDialog=function(e){var t=document.createElement("div");t.style.textAlign="right";var l=document.createElement("textarea");l.setAttribute("wrap","off"),l.setAttribute("spellcheck","false"),l.setAttribute("autocorrect","off"),l.setAttribute("autocomplete","off"),l.setAttribute("autocapitalize","off"),l.style.overflow="auto",l.style.resize="none",l.style.width="600px",l.style.height="360px",l.style.marginBottom="16px",l.value=mxUtils.getPrettyXml(e.editor.getGraphXml()),t.appendChild(l),this.init=function(){l.focus()},Graph.fileSupport&&(l.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()}),!1),l.addEventListener("drop",(function(t){if(t.stopPropagation(),t.preventDefault(),t.dataTransfer.files.length>0){var i=t.dataTransfer.files[0],n=new FileReader;n.onload=function(e){l.value=e.target.result},n.readAsText(i)}else l.value=e.extractGraphModelFromEvent(t)}),!1));var i=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog()}));i.className="geBtn",e.editor.cancelFirst&&t.appendChild(i);var n=document.createElement("select");if(n.style.width="180px",n.className="geBtn",e.editor.graph.isEnabled()){var o=document.createElement("option");o.setAttribute("value","replace"),mxUtils.write(o,mxResources.get("replaceExistingDrawing")),n.appendChild(o)}if(e.editor.graph.isEnabled()){var a=document.createElement("option");a.setAttribute("value","import"),mxUtils.write(a,mxResources.get("addToExistingDrawing")),n.appendChild(a)}t.appendChild(n);var r=mxUtils.button(mxResources.get("ok"),(function(){var t=Graph.zapGremlins(mxUtils.trim(l.value)),i=null;if("new"==n.value)e.hideDialog(),e.editor.editAsNew(t);else if("replace"==n.value){e.editor.graph.model.beginUpdate();try{e.editor.setGraphXml(mxUtils.parseXml(t).documentElement),e.hideDialog()}catch(e){i=e}finally{e.editor.graph.model.endUpdate()}}else if("import"==n.value){e.editor.graph.model.beginUpdate();try{var o=mxUtils.parseXml(t),a=new mxGraphModel;new mxCodec(o).decode(o.documentElement,a);var r=a.getChildren(a.getChildAt(a.getRoot(),0));e.editor.graph.setSelectionCells(e.editor.graph.importCells(r)),e.hideDialog()}catch(e){i=e}finally{e.editor.graph.model.endUpdate()}}null!=i&&mxUtils.alert(i.message)}));r.className="geBtn gePrimaryBtn",t.appendChild(r),e.editor.cancelFirst||t.appendChild(i),this.container=t};EditDiagramDialog.showNewWindowOption=!0;var ExportDialog=function(e){var t,l,i=e.editor.graph,n=i.getGraphBounds(),o=i.view.scale,a=Math.ceil(n.width/o),r=Math.ceil(n.height/o),d=document.createElement("table"),s=document.createElement("tbody");d.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",l.style.width="100px",mxUtils.write(l,mxResources.get("filename")+":"),t.appendChild(l);var c=document.createElement("input");c.setAttribute("value",e.editor.getOrCreateFilename()),c.style.width="180px",(l=document.createElement("td")).appendChild(c),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("format")+":"),t.appendChild(l);var m=document.createElement("select");m.style.width="180px";var p=document.createElement("option");p.setAttribute("value","png"),mxUtils.write(p,mxResources.get("formatPng")),m.appendChild(p);var u=document.createElement("option");ExportDialog.showGifOption&&(u.setAttribute("value","gif"),mxUtils.write(u,mxResources.get("formatGif")),m.appendChild(u));var h=document.createElement("option");h.setAttribute("value","jpg"),mxUtils.write(h,mxResources.get("formatJpg")),m.appendChild(h);var g=document.createElement("option");g.setAttribute("value","pdf"),mxUtils.write(g,mxResources.get("formatPdf")),m.appendChild(g);var x=document.createElement("option");if(x.setAttribute("value","svg"),mxUtils.write(x,mxResources.get("formatSvg")),m.appendChild(x),ExportDialog.showXmlOption){var v=document.createElement("option");v.setAttribute("value","xml"),mxUtils.write(v,mxResources.get("formatXml")),m.appendChild(v)}(l=document.createElement("td")).appendChild(m),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("zoom")+" (%):"),t.appendChild(l);var b=document.createElement("input");b.setAttribute("type","number"),b.setAttribute("value","100"),b.style.width="180px",(l=document.createElement("td")).appendChild(b),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("width")+":"),t.appendChild(l);var C=document.createElement("input");C.setAttribute("value",a),C.style.width="180px",(l=document.createElement("td")).appendChild(C),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("height")+":"),t.appendChild(l);var y=document.createElement("input");y.setAttribute("value",r),y.style.width="180px",(l=document.createElement("td")).appendChild(y),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("dpi")+":"),t.appendChild(l);var f=document.createElement("select");f.style.width="180px";var E=document.createElement("option");E.setAttribute("value","100"),mxUtils.write(E,"100dpi"),f.appendChild(E);var w=document.createElement("option");w.setAttribute("value","200"),mxUtils.write(w,"200dpi"),f.appendChild(w);var F=document.createElement("option");F.setAttribute("value","300"),mxUtils.write(F,"300dpi"),f.appendChild(F);var A=document.createElement("option");A.setAttribute("value","400"),mxUtils.write(A,"400dpi"),f.appendChild(A);var D=document.createElement("option");D.setAttribute("value","custom"),mxUtils.write(D,mxResources.get("custom")),f.appendChild(D);var U=document.createElement("input");U.style.width="180px",U.style.display="none",U.setAttribute("value","100"),U.setAttribute("type","number"),U.setAttribute("min","50"),U.setAttribute("step","50");var k=!1;mxEvent.addListener(f,"change",(function(){"custom"==this.value?(this.style.display="none",U.style.display="",U.focus()):(U.value=this.value,k||(b.value=this.value))})),mxEvent.addListener(U,"change",(function(){var e=parseInt(U.value);isNaN(e)||e<=0?U.style.backgroundColor="red":(U.style.backgroundColor="",k||(b.value=e))})),(l=document.createElement("td")).appendChild(f),l.appendChild(U),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("background")+":"),t.appendChild(l);var S=document.createElement("input");S.setAttribute("type","checkbox"),S.checked=null==i.background||i.background==mxConstants.NONE,(l=document.createElement("td")).appendChild(S),mxUtils.write(l,mxResources.get("transparent")),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("grid")+":"),t.appendChild(l);var R=document.createElement("input");R.setAttribute("type","checkbox"),R.checked=!1,(l=document.createElement("td")).appendChild(R),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("borderWidth")+":"),t.appendChild(l);var L=document.createElement("input");function I(){var e=c.value,t=e.lastIndexOf(".");c.value=t>0?e.substring(0,t+1)+m.value:e+"."+m.value,"xml"===m.value?(b.setAttribute("disabled","true"),C.setAttribute("disabled","true"),y.setAttribute("disabled","true"),L.setAttribute("disabled","true")):(b.removeAttribute("disabled"),C.removeAttribute("disabled"),y.removeAttribute("disabled"),L.removeAttribute("disabled")),"png"===m.value||"svg"===m.value||"pdf"===m.value?S.removeAttribute("disabled"):S.setAttribute("disabled","disabled"),"png"===m.value||"jpg"===m.value||"pdf"===m.value?R.removeAttribute("disabled"):R.setAttribute("disabled","disabled"),"png"===m.value?(f.removeAttribute("disabled"),U.removeAttribute("disabled")):(f.setAttribute("disabled","disabled"),U.setAttribute("disabled","disabled"))}function M(){C.value*y.value>MAX_AREA||C.value<=0?C.style.backgroundColor="red":C.style.backgroundColor="",C.value*y.value>MAX_AREA||y.value<=0?y.style.backgroundColor="red":y.style.backgroundColor=""}L.setAttribute("type","number"),L.setAttribute("value",ExportDialog.lastBorderValue),L.style.width="180px",(l=document.createElement("td")).appendChild(L),t.appendChild(l),s.appendChild(t),d.appendChild(s),mxEvent.addListener(m,"change",I),I(),mxEvent.addListener(b,"change",(function(){k=!0;var e=Math.max(0,parseFloat(b.value)||100)/100;b.value=parseFloat((100*e).toFixed(2)),a>0?(C.value=Math.floor(a*e),y.value=Math.floor(r*e)):(b.value="100",C.value=a,y.value=r),M()})),mxEvent.addListener(C,"change",(function(){var e=parseInt(C.value)/a;e>0?(b.value=parseFloat((100*e).toFixed(2)),y.value=Math.floor(r*e)):(b.value="100",C.value=a,y.value=r),M()})),mxEvent.addListener(y,"change",(function(){var e=parseInt(y.value)/r;e>0?(b.value=parseFloat((100*e).toFixed(2)),C.value=Math.floor(a*e)):(b.value="100",C.value=a,y.value=r),M()})),t=document.createElement("tr"),(l=document.createElement("td")).setAttribute("align","right"),l.style.paddingTop="22px",l.colSpan=2;var N=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,(function(){if(parseInt(b.value)<=0)mxUtils.alert(mxResources.get("drawingEmpty"));else{var t=c.value,l=m.value,n=Math.max(0,parseFloat(b.value)||100)/100,o=Math.max(0,parseInt(L.value)),a=i.background,r=Math.max(1,parseInt(U.value));"svg"!=l&&"png"!=l&&"pdf"!=l||!S.checked?null!=a&&a!=mxConstants.NONE||(a="#ffffff"):a=null,ExportDialog.lastBorderValue=o,ExportDialog.exportFile(e,t,l,a,n,o,r,R.checked)}})));N.className="geBtn gePrimaryBtn";var B=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog()}));B.className="geBtn",e.editor.cancelFirst?(l.appendChild(B),l.appendChild(N)):(l.appendChild(N),l.appendChild(B)),t.appendChild(l),s.appendChild(t),d.appendChild(s),this.container=d};ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(e,t,l,i,n,o,a,r){var d=e.editor.graph;if("xml"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(e.editor.getGraphXml()),t,l);else if("svg"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(d.getSvg(i,n,o)),t,l);else{var s=d.getGraphBounds(),c=mxUtils.createXmlDocument(),m=c.createElement("output");c.appendChild(m);var p=new mxXmlCanvas2D(m);p.translate(Math.floor((o/n-s.x)/d.view.scale),Math.floor((o/n-s.y)/d.view.scale)),p.scale(n/d.view.scale),(new mxImageExport).drawState(d.getView().getState(d.model.root),p);var u="xml="+encodeURIComponent(mxUtils.getXml(m)),h=Math.ceil(s.width*n/d.view.scale+2*o),g=Math.ceil(s.height*n/d.view.scale+2*o);u.length<=MAX_REQUEST_SIZE&&h*g<MAX_AREA?(e.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+l+"&filename="+encodeURIComponent(t)+"&bg="+(null!=i?i:"none")+"&w="+h+"&h="+g+"&"+u+"&dpi="+a).simulate(document,"_blank")):mxUtils.alert(mxResources.get("drawingTooLarge"))}},ExportDialog.saveLocalFile=function(e,t,l,i){t.length<MAX_REQUEST_SIZE?(e.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(l)+"&format="+i).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))};var EditDataDialog=function(e,t){var l=document.createElement("div"),i=e.editor.graph,n=i.getModel().getValue(t);if(!mxUtils.isNode(n)){var o=mxUtils.createXmlDocument().createElement("object");o.setAttribute("label",n||""),n=o}var a={};try{null!=(g=mxUtils.getValue(e.editor.graph.getCurrentCellStyle(t),"metaData",null))&&(a=JSON.parse(g))}catch(e){}var r=new mxForm("properties");r.table.style.width="100%";for(var d=n.attributes,s=[],c=[],m=0,p=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(e,t):null,u=function(e,t){var l=document.createElement("div");l.style.position="relative",l.style.paddingRight="20px",l.style.boxSizing="border-box",l.style.width="100%";var i=document.createElement("a"),n=mxUtils.createImage(Dialog.prototype.closeImage);n.style.height="9px",n.style.fontSize="9px",n.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",i.className="geButton",i.setAttribute("title",mxResources.get("delete")),i.style.position="absolute",i.style.top="4px",i.style.right="0px",i.style.margin="0px",i.style.width="9px",i.style.height="9px",i.style.cursor="pointer",i.appendChild(n);var o=function(e){return function(){for(var t=0,l=0;l<s.length;l++){if(s[l]==e){c[l]=null,r.table.deleteRow(t+(null!=p?1:0));break}null!=c[l]&&t++}}}(t);mxEvent.addListener(i,"click",o);var a=e.parentNode;l.appendChild(e),l.appendChild(i),a.appendChild(l)},h=function(e,t,l){s[e]=t,c[e]=r.addTextarea(s[m]+":",l,2),c[e].style.width="100%",l.indexOf("\n")>0&&c[e].setAttribute("rows","2"),u(c[e],t),null!=a[t]&&0==a[t].editable&&c[e].setAttribute("disabled","disabled")},g=[],x=i.getModel().getParent(t)==i.getModel().getRoot(),v=0;v<d.length;v++)!x&&"label"==d[v].nodeName||"placeholders"==d[v].nodeName||g.push({name:d[v].nodeName,value:d[v].nodeValue});if(g.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),null!=p){var b=document.createElement("div");b.style.width="100%",b.style.fontSize="11px",b.style.textAlign="center",mxUtils.write(b,p);var C=r.addField(mxResources.get("id")+":",b);mxEvent.addListener(b,"dblclick",(function(l){if(mxEvent.isShiftDown(l)){var n=new FilenameDialog(e,p,mxResources.get("apply"),mxUtils.bind(this,(function(l){null!=l&&l.length>0&&l!=p&&(null==i.getModel().getCell(l)?(i.getModel().cellRemoved(t),t.setId(l),p=l,C.innerHTML=mxUtils.htmlEntities(l),i.getModel().cellAdded(t)):e.handleError({message:mxResources.get("alreadyExst",[l])}))})),mxResources.get("id"));e.showDialog(n.container,300,80,!0,!0),n.init()}})),b.setAttribute("title","Shift+Double Click to Edit ID")}for(v=0;v<g.length;v++)h(m,g[v].name,g[v].value),m++;var y=document.createElement("div");y.style.position="absolute",y.style.top="30px",y.style.left="30px",y.style.right="30px",y.style.bottom="80px",y.style.overflowY="auto",y.appendChild(r.table);var f=document.createElement("div");f.style.boxSizing="border-box",f.style.paddingRight="160px",f.style.whiteSpace="nowrap",f.style.marginTop="6px",f.style.width="100%";var E=document.createElement("input");E.setAttribute("placeholder",mxResources.get("enterPropertyName")),E.setAttribute("type","text"),E.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),E.style.boxSizing="border-box",E.style.marginLeft="2px",E.style.width="100%",f.appendChild(E),y.appendChild(f),l.appendChild(y);var w=mxUtils.button(mxResources.get("addProperty"),(function(){var e=E.value;if(e.length>0&&"label"!=e&&"placeholders"!=e&&e.indexOf(":")<0)try{var t=mxUtils.indexOf(s,e);if(t>=0&&null!=c[t])c[t].focus();else{n.cloneNode(!1).setAttribute(e,""),t>=0&&(s.splice(t,1),c.splice(t,1)),s.push(e);var l=r.addTextarea(e+":","",2);l.style.width="100%",c.push(l),u(l,e),l.focus()}w.setAttribute("disabled","disabled"),E.value=""}catch(e){mxUtils.alert(e)}else mxUtils.alert(mxResources.get("invalidName"))}));mxEvent.addListener(E,"keypress",(function(e){13==e.keyCode&&w.click()})),this.init=function(){c.length>0?c[0].focus():E.focus()},w.setAttribute("title",mxResources.get("addProperty")),w.setAttribute("disabled","disabled"),w.style.textOverflow="ellipsis",w.style.position="absolute",w.style.overflow="hidden",w.style.width="144px",w.style.right="0px",w.className="geBtn",f.appendChild(w);var F=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog.apply(e,arguments)}));F.setAttribute("title","Escape"),F.className="geBtn";var A=mxUtils.button(mxResources.get("apply"),(function(){try{e.hideDialog.apply(e,arguments),n=n.cloneNode(!0);for(var l=!1,o=0;o<s.length;o++)null==c[o]?n.removeAttribute(s[o]):(n.setAttribute(s[o],c[o].value),l=l||"placeholder"==s[o]&&"1"==n.getAttribute("placeholders"));l&&n.removeAttribute("label"),i.getModel().setValue(t,n)}catch(e){mxUtils.alert(e)}}));function D(){E.value.length>0?w.removeAttribute("disabled"):w.setAttribute("disabled","disabled")}A.setAttribute("title","Ctrl+Enter"),A.className="geBtn gePrimaryBtn",mxEvent.addListener(l,"keypress",(function(e){13==e.keyCode&&mxEvent.isControlDown(e)&&A.click()})),mxEvent.addListener(E,"keyup",D),mxEvent.addListener(E,"change",D);var U=document.createElement("div");if(U.style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",e.editor.graph.getModel().isVertex(t)||e.editor.graph.getModel().isEdge(t)){var k=document.createElement("span");k.style.marginRight="10px";var S=document.createElement("input");if(S.setAttribute("type","checkbox"),S.style.marginRight="6px","1"==n.getAttribute("placeholders")&&(S.setAttribute("checked","checked"),S.defaultChecked=!0),mxEvent.addListener(S,"click",(function(){"1"==n.getAttribute("placeholders")?n.removeAttribute("placeholders"):n.setAttribute("placeholders","1")})),k.appendChild(S),mxUtils.write(k,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink){var R=document.createElement("a");R.setAttribute("href",EditDataDialog.placeholderHelpLink),R.setAttribute("title",mxResources.get("help")),R.setAttribute("target","_blank"),R.style.marginLeft="8px",R.style.cursor="help";var L=document.createElement("img");mxUtils.setOpacity(L,50),L.style.height="16px",L.style.width="16px",L.setAttribute("border","0"),L.setAttribute("valign","middle"),L.style.marginTop=mxClient.IS_IE11?"0px":"-4px",L.setAttribute("src",Editor.helpImage),R.appendChild(L),k.appendChild(R)}U.appendChild(k)}e.editor.cancelFirst?(U.appendChild(F),U.appendChild(A)):(U.appendChild(A),U.appendChild(F)),l.appendChild(U),this.container=l};EditDataDialog.getDisplayIdForCell=function(e,t){var l=null;return null!=e.editor.graph.getModel().getParent(t)&&(l=t.getId()),l},EditDataDialog.placeholderHelpLink=null;var LinkDialog=function(e,t,l,i){var n=document.createElement("div");mxUtils.write(n,mxResources.get("editLink")+":");var o=document.createElement("div");o.className="geTitle",o.style.backgroundColor="transparent",o.style.borderColor="transparent",o.style.whiteSpace="nowrap",o.style.textOverflow="clip",o.style.cursor="default",o.style.paddingRight="20px";var a=document.createElement("input");a.setAttribute("value",t),a.setAttribute("placeholder","http://www.example.com/"),a.setAttribute("type","text"),a.style.marginTop="6px",a.style.width="400px",a.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",a.style.backgroundRepeat="no-repeat",a.style.backgroundPosition="100% 50%",a.style.paddingRight="14px";var r=document.createElement("div");r.setAttribute("title",mxResources.get("reset")),r.style.position="relative",r.style.left="-16px",r.style.width="12px",r.style.height="14px",r.style.cursor="pointer",r.style.display="inline-block",r.style.top="3px",r.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(r,"click",(function(){a.value="",a.focus()})),o.appendChild(a),o.appendChild(r),n.appendChild(o),this.init=function(){a.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5?a.select():document.execCommand("selectAll",!1,null)};var d=document.createElement("div");d.style.marginTop="18px",d.style.textAlign="right",mxEvent.addListener(a,"keypress",(function(t){13==t.keyCode&&(e.hideDialog(),i(a.value))}));var s=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog()}));s.className="geBtn",e.editor.cancelFirst&&d.appendChild(s);var c=mxUtils.button(l,(function(){e.hideDialog(),i(a.value)}));c.className="geBtn gePrimaryBtn",d.appendChild(c),e.editor.cancelFirst||d.appendChild(s),n.appendChild(d),this.container=n},OutlineWindow=function(e,t,l,i,n){var o=e.editor.graph,a=document.createElement("div");a.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),a,t,l,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-("1"==urlParams.sketch?3:48))),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var r=mxUtils.bind(this,(function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)}));mxEvent.addListener(window,"resize",r);var d=e.createOutline(this.window);this.destroy=function(){mxEvent.removeListener(window,"resize",r),this.window.destroy(),d.destroy()},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,(function(){this.window.fit(),d.setSuspended(!1)}))),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,(function(){d.setSuspended(!0)}))),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,(function(){d.setSuspended(!1)}))),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,(function(){d.setSuspended(!0)}))),d.init(a),e.actions.get("zoomIn"),e.actions.get("zoomOut"),mxEvent.addMouseWheelListener((function(e,t){for(var l=!1,i=mxEvent.getSource(e);null!=i;){if(i==d.svg){l=!0;break}i=i.parentNode}if(l){var n=o.zoomFactor;null!=e.deltaY&&Math.round(e.deltaY)!=e.deltaY&&(n=1+Math.abs(e.deltaY)/20*(n-1)),o.lazyZoom(t,null,null,n),mxEvent.consume(e)}}))},LayersWindow=function(e,t,l,i,n){var o=e.editor.graph,a=document.createElement("div");a.style.userSelect="none",a.style.background=Editor.isDarkMode()?Dialog.backdropColor:"#fff",a.style.border="1px solid whiteSmoke",a.style.height="100%",a.style.marginBottom="10px",a.style.overflow="auto";var r=EditorUi.compactUi?"26px":"30px",d=document.createElement("div");d.style.backgroundColor=Editor.isDarkMode()?Dialog.backdropColor:"#fff",d.style.position="absolute",d.style.overflow="auto",d.style.left="0px",d.style.right="0px",d.style.top="0px",d.style.bottom=parseInt(r)+7+"px",a.appendChild(d);var s=null,c=null;mxEvent.addListener(a,"dragover",(function(e){e.dataTransfer.dropEffect="move",c=0,e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(a,"drop",(function(e){e.stopPropagation(),e.preventDefault()}));var m=null,p=null,u=document.createElement("div");u.className="geToolbarContainer",u.style.position="absolute",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.style.height=r,u.style.overflow="hidden",u.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",u.style.backgroundColor=Editor.isDarkMode()?Dialog.backdropColor:"whiteSmoke",u.style.borderWidth="1px 0px 0px 0px",u.style.borderColor="#c3c3c3",u.style.borderStyle="solid",u.style.display="block",u.style.whiteSpace="nowrap";var h=document.createElement("a");h.className="geButton";var g=h.cloneNode(!1),x=document.createElement("img");x.setAttribute("border","0"),x.setAttribute("width","22"),x.setAttribute("src",Editor.trashImage),x.style.opacity="0.9",Editor.isDarkMode()&&(x.style.filter="invert(100%)"),g.appendChild(x),mxEvent.addListener(g,"click",(function(e){if(o.isEnabled()){o.model.beginUpdate();try{var t=o.model.root.getIndex(p);o.removeCells([p],!1),0==o.model.getChildCount(o.model.root)?(o.model.add(o.model.root,new mxCell),o.setDefaultParent(null)):t>0&&t<=o.model.getChildCount(o.model.root)?o.setDefaultParent(o.model.getChildAt(o.model.root,t-1)):o.setDefaultParent(null)}finally{o.model.endUpdate()}}mxEvent.consume(e)})),o.isEnabled()||(g.className="geButton mxDisabled"),u.appendChild(g);var v=h.cloneNode();v.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",["..."]))),(x=x.cloneNode(!1)).setAttribute("src",Editor.verticalDotsImage),v.appendChild(x),mxEvent.addListener(v,"click",(function(t){if(o.isEnabled()&&!o.isSelectionEmpty()){var l=mxUtils.getOffset(v);e.showPopupMenu(mxUtils.bind(this,(function(e,t){for(var l=m-1;l>=0;l--)mxUtils.bind(this,(function(l){var i=e.addItem(o.convertValueToString(l)||mxResources.get("background"),null,mxUtils.bind(this,(function(){o.moveCells(o.getSelectionCells(),0,0,!1,l)})),t);1==o.getSelectionCount()&&o.model.isAncestor(l,o.getSelectionCell())&&e.addCheckmark(i,Editor.checkmarkImage)}))(o.model.getChildAt(o.model.root,l))})),l.x,l.y+v.offsetHeight,t)}})),u.appendChild(v);var b=h.cloneNode(!1);b.setAttribute("title",mxResources.get("editData")),(x=x.cloneNode(!1)).setAttribute("src",Editor.editImage),b.appendChild(x),mxEvent.addListener(b,"click",(function(t){o.isEnabled()&&e.showDataDialog(p),mxEvent.consume(t)})),o.isEnabled()||(b.className="geButton mxDisabled"),u.appendChild(b);var C=h.cloneNode(!1);C.setAttribute("title",mxResources.get("duplicate")),(x=x.cloneNode(!1)).setAttribute("src",Editor.duplicateImage),C.appendChild(x),mxEvent.addListener(C,"click",(function(e){if(o.isEnabled()){var t=null;o.model.beginUpdate();try{t=o.cloneCell(p),o.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=o.addCell(t,o.model.root),o.setDefaultParent(t)}finally{o.model.endUpdate()}null==t||o.isCellLocked(t)||o.selectAll(t)}})),o.isEnabled()||(C.className="geButton mxDisabled"),u.appendChild(C);var y=h.cloneNode(!1);y.setAttribute("title",mxResources.get("addLayer")),(x=x.cloneNode(!1)).setAttribute("src",Editor.addImage),y.appendChild(x),mxEvent.addListener(y,"click",(function(e){if(o.isEnabled()){o.model.beginUpdate();try{var t=o.addCell(new mxCell(mxResources.get("untitledLayer")),o.model.root);o.setDefaultParent(t)}finally{o.model.endUpdate()}}mxEvent.consume(e)})),o.isEnabled()||(y.className="geButton mxDisabled"),u.appendChild(y),a.appendChild(u);var f=new mxDictionary,E=document.createElement("span");function w(){var e=f.get(o.getLayerForCells(o.getSelectionCells()));null!=e?e.appendChild(E):null!=E.parentNode&&E.parentNode.removeChild(E)}function F(){function t(t,l,i,n){var a=document.createElement("div");a.className="geToolbarContainer",f.put(i,a),a.style.overflow="hidden",a.style.position="relative",a.style.padding="4px",a.style.height="22px",a.style.display="block",a.style.backgroundColor=Editor.isDarkMode()?Dialog.backdropColor:"whiteSmoke",a.style.borderWidth="0px 0px 1px 0px",a.style.borderColor="#c3c3c3",a.style.borderStyle="solid",a.style.whiteSpace="nowrap",a.setAttribute("title",l);var r=document.createElement("div");r.style.display="inline-block",r.style.width="100%",r.style.textOverflow="ellipsis",r.style.overflow="hidden",mxEvent.addListener(a,"dragover",(function(e){e.dataTransfer.dropEffect="move",c=t,e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(a,"dragstart",(function(e){s=a,mxClient.IS_FF&&e.dataTransfer.setData("Text","<layer/>")})),mxEvent.addListener(a,"dragend",(function(e){null!=s&&null!=c&&o.addCell(i,o.model.root,c),s=null,c=null,e.stopPropagation(),e.preventDefault()}));var u=document.createElement("img");u.setAttribute("draggable","false"),u.setAttribute("align","top"),u.setAttribute("border","0"),u.style.width="16px",u.style.padding="0px 6px 0 4px",u.style.marginTop="2px",u.style.cursor="pointer",u.setAttribute("title",mxResources.get(o.model.isVisible(i)?"hide":"show")),o.model.isVisible(i)?(u.setAttribute("src",Editor.visibleImage),mxUtils.setOpacity(a,75)):(u.setAttribute("src",Editor.hiddenImage),mxUtils.setOpacity(a,25)),Editor.isDarkMode()&&(u.style.filter="invert(100%)"),r.appendChild(u),mxEvent.addListener(u,"click",(function(e){o.model.setVisible(i,!o.model.isVisible(i)),mxEvent.consume(e)}));var h=document.createElement("img");h.setAttribute("draggable","false"),h.setAttribute("align","top"),h.setAttribute("border","0"),h.style.width="16px",h.style.padding="0px 6px 0 0",h.style.marginTop="2px",h.setAttribute("title",mxResources.get("lockUnlock"));var g=o.getCurrentCellStyle(i);"1"==mxUtils.getValue(g,"locked","0")?(h.setAttribute("src",Editor.lockedImage),mxUtils.setOpacity(h,75)):(h.setAttribute("src",Editor.unlockedImage),mxUtils.setOpacity(h,25)),Editor.isDarkMode()&&(h.style.filter="invert(100%)"),o.isEnabled()&&(h.style.cursor="pointer"),mxEvent.addListener(h,"click",(function(e){if(o.isEnabled()){var t=null;o.getModel().beginUpdate();try{t="1"==mxUtils.getValue(g,"locked","0")?null:"1",o.setCellStyles("locked",t,[i])}finally{o.getModel().endUpdate()}"1"==t&&o.removeSelectionCells(o.getModel().getDescendants(i)),mxEvent.consume(e)}})),r.appendChild(h);var x=document.createElement("span");if(mxUtils.write(x,l),x.style.display="block",x.style.whiteSpace="nowrap",x.style.overflow="hidden",x.style.textOverflow="ellipsis",x.style.position="absolute",x.style.left="52px",x.style.right="8px",x.style.top="8px",r.appendChild(x),a.appendChild(r),o.isEnabled()){if(mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_IE&&document.documentMode<10){var v=document.createElement("div");if(v.style.display="block",v.style.textAlign="right",v.style.whiteSpace="nowrap",v.style.position="absolute",v.style.right="16px",v.style.top="6px",t>0){var b=document.createElement("a");b.setAttribute("title",mxResources.get("toBack")),b.className="geButton",b.style.cssFloat="none",b.innerHTML="&#9660;",b.style.width="14px",b.style.height="14px",b.style.fontSize="14px",b.style.margin="0px",b.style.marginTop="-1px",v.appendChild(b),mxEvent.addListener(b,"click",(function(e){o.isEnabled()&&o.addCell(i,o.model.root,t-1),mxEvent.consume(e)}))}if(t>=0&&t<m-1){var C=document.createElement("a");C.setAttribute("title",mxResources.get("toFront")),C.className="geButton",C.style.cssFloat="none",C.innerHTML="&#9650;",C.style.width="14px",C.style.height="14px",C.style.fontSize="14px",C.style.margin="0px",C.style.marginTop="-1px",v.appendChild(C),mxEvent.addListener(C,"click",(function(e){o.isEnabled()&&o.addCell(i,o.model.root,t+1),mxEvent.consume(e)}))}a.appendChild(v)}mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&(a.setAttribute("draggable","true"),a.style.cursor="move")}mxEvent.addListener(a,"dblclick",(function(t){var l=mxEvent.getSource(t).nodeName;"INPUT"!=l&&"IMG"!=l&&(function(t){if(o.isEnabled()&&null!=t){var l=o.convertValueToString(t),i=new FilenameDialog(e,l||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,(function(e){null!=e&&o.cellLabelChanged(t,e)})),mxResources.get("enterName"));e.showDialog(i.container,300,100,!0,!0),i.init()}}(i),mxEvent.consume(t))})),o.getDefaultParent()==i&&(a.style.background=Editor.isDarkMode()?"#505759":"#e6eff8",a.style.fontWeight=o.isEnabled()?"bold":"",p=i),mxEvent.addListener(a,"click",(function(e){o.isEnabled()&&(o.setDefaultParent(n),o.view.setCurrentRoot(null),mxEvent.isShiftDown(e)&&o.setSelectionCells(i.children),mxEvent.consume(e))})),d.appendChild(a)}m=o.model.getChildCount(o.model.root),d.innerHTML="",f.clear();for(var l=m-1;l>=0;l--)mxUtils.bind(this,(function(e){t(l,o.convertValueToString(e)||mxResources.get("background"),e,e)}))(o.model.getChildAt(o.model.root,l));var i=o.convertValueToString(p)||mxResources.get("background");g.setAttribute("title",mxResources.get("removeIt",[i])),C.setAttribute("title",mxResources.get("duplicateIt",[i])),o.isSelectionEmpty()&&(v.className="geButton mxDisabled"),w()}E.setAttribute("title",mxResources.get("selectionOnly")),E.innerHTML="&#8226;",E.style.position="absolute",E.style.fontWeight="bold",E.style.fontSize="16pt",E.style.right="2px",E.style.top="2px",F(),o.model.addListener(mxEvent.CHANGE,F),o.addListener("defaultParentChanged",F),o.selectionModel.addListener(mxEvent.CHANGE,(function(){o.isSelectionEmpty()?v.className="geButton mxDisabled":v.className="geButton",w()})),this.window=new mxWindow(mxResources.get("layers"),a,t,l,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,150,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){d.scrollTop=d.scrollHeight-d.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,(function(){this.window.fit()}))),this.refreshLayers=F,this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-("1"==urlParams.sketch?3:48))),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var A=mxUtils.bind(this,(function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)}));mxEvent.addListener(window,"resize",A),this.destroy=function(){mxEvent.removeListener(window,"resize",A),this.window.destroy()}};